<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Path C: Compression & Streaming | SIREN Tech Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --siren-red: #e63946;
            --siren-orange: #f77f00;
            --siren-gradient: linear-gradient(135deg, #e63946 0%, #f77f00 100%);
            --dark-bg: #0a0a0b;
            --card-bg: rgba(255, 255, 255, 0.03);
            --card-border: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --text-muted: rgba(255, 255, 255, 0.4);
        }
        body { font-family: 'Inter', sans-serif; background: var(--dark-bg); color: var(--text-primary); min-height: 100vh; line-height: 1.7; }
        .ambient-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .ambient-orb { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.2; }
        .orb-1 { width: 500px; height: 500px; background: var(--siren-red); top: -150px; right: -150px; }
        .orb-2 { width: 300px; height: 300px; background: var(--siren-orange); bottom: 20%; left: -100px; }
        .container { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; padding: 40px 24px 80px; }
        .top-nav { display: flex; align-items: center; justify-content: space-between; margin-bottom: 60px; padding-bottom: 20px; border-bottom: 1px solid var(--card-border); }
        .back-link { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); text-decoration: none; font-size: 14px; transition: color 0.3s ease; }
        .back-link:hover { color: var(--text-primary); }
        .back-link svg { width: 20px; height: 20px; }
        .nav-logo { font-size: 12px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; background: var(--siren-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .page-header { margin-bottom: 48px; }
        .path-badge { display: inline-flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .path-letter { width: 48px; height: 48px; background: var(--siren-gradient); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700; }
        .path-label { font-size: 13px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--siren-orange); }
        .page-title { font-size: clamp(32px, 5vw, 48px); font-weight: 700; margin-bottom: 16px; }
        .page-subtitle { font-size: 18px; color: var(--text-secondary); }
        .section { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 20px; padding: 36px; margin-bottom: 32px; backdrop-filter: blur(20px); }
        .section-num { font-size: 12px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--siren-orange); margin-bottom: 12px; }
        .section h2 { font-size: 24px; font-weight: 600; margin-bottom: 20px; }
        .section h3 { font-size: 18px; font-weight: 600; margin: 28px 0 16px; }
        .section p { color: var(--text-secondary); margin-bottom: 16px; }
        .section strong { color: var(--text-primary); }
        .section ul { color: var(--text-secondary); margin: 16px 0; padding-left: 24px; }
        .section li { margin-bottom: 8px; }
        .code-block { background: rgba(0, 0, 0, 0.4); border: 1px solid var(--card-border); border-radius: 12px; padding: 20px; margin: 20px 0; overflow-x: auto; }
        .code-block code { font-family: 'JetBrains Mono', monospace; font-size: 13px; color: #e0e0e0; line-height: 1.6; white-space: pre; }
        .comment { color: #6a9955; }
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .number { color: #b5cea8; }
        .function { color: #dcdcaa; }
        .info-box { background: rgba(247, 127, 0, 0.1); border-left: 3px solid var(--siren-orange); padding: 16px 20px; margin: 20px 0; border-radius: 0 8px 8px 0; }
        .info-box p { margin: 0; font-size: 14px; }
        .property-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin: 20px 0; }
        .property-card { background: rgba(255, 255, 255, 0.02); border: 1px solid var(--card-border); border-radius: 12px; padding: 20px; }
        .property-name { font-family: 'JetBrains Mono', monospace; font-size: 14px; color: var(--siren-orange); margin-bottom: 8px; }
        .property-desc { font-size: 13px; color: var(--text-secondary); }
        .diagram { background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 32px; margin: 24px 0; text-align: center; font-family: 'JetBrains Mono', monospace; }
        .diagram-row { display: flex; align-items: center; justify-content: center; gap: 16px; margin: 12px 0; flex-wrap: wrap; }
        .diagram-box { background: rgba(230, 57, 70, 0.2); border: 1px solid rgba(230, 57, 70, 0.4); border-radius: 8px; padding: 12px 20px; font-size: 13px; }
        .diagram-arrow { color: var(--siren-orange); font-size: 20px; }
        .table-wrapper { overflow-x: auto; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th, td { padding: 12px 16px; text-align: left; border-bottom: 1px solid var(--card-border); }
        th { color: var(--text-muted); font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
        td { color: var(--text-secondary); }
        td strong { color: var(--text-primary); }
        .math-block { background: rgba(230, 57, 70, 0.1); border: 1px solid rgba(230, 57, 70, 0.2); border-radius: 12px; padding: 24px; margin: 20px 0; font-family: 'JetBrains Mono', monospace; font-size: 14px; text-align: center; }
        .nav-footer { display: flex; justify-content: space-between; gap: 20px; margin-top: 48px; padding-top: 32px; border-top: 1px solid var(--card-border); flex-wrap: wrap; }
        .nav-btn { display: flex; align-items: center; gap: 12px; padding: 16px 24px; background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 12px; text-decoration: none; color: var(--text-primary); transition: all 0.3s ease; flex: 1; min-width: 200px; }
        .nav-btn:hover { border-color: rgba(230, 57, 70, 0.4); transform: translateY(-2px); }
        .nav-btn.next { justify-content: flex-end; text-align: right; }
        .nav-btn-label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .nav-btn-title { font-weight: 600; }
        .nav-btn svg { width: 20px; height: 20px; stroke: var(--text-secondary); }
        @media (max-width: 600px) { .section { padding: 24px; } .nav-footer { flex-direction: column; } .nav-btn.next { justify-content: flex-start; text-align: left; } }
    </style>
</head>
<body>
    <div class="ambient-bg"><div class="ambient-orb orb-1"></div><div class="ambient-orb orb-2"></div></div>
    <div class="container">
        <nav class="top-nav">
            <a href="../" class="back-link"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>Back to Overview</a>
            <span class="nav-logo">SIREN Tech Guide</span>
        </nav>

        <header class="page-header">
            <div class="path-badge"><div class="path-letter">C</div><span class="path-label">Deep Dive</span></div>
            <h1 class="page-title">Compression & Streaming</h1>
            <p class="page-subtitle">Making 4D splats deliverable over the internet</p>
        </header>

        <section class="section">
            <div class="section-num">01</div>
            <h2>The Size Problem</h2>
            <p>A single gaussian splat frame is typically <strong>50-200MB</strong>. For video content:</p>
            <div class="math-block">
                30 fps Ã— 60 seconds Ã— 100MB = <strong>180 GB per minute</strong> ðŸ˜±
            </div>
            <p>This is obviously impossible to stream. We need aggressive compression strategies.</p>
            <div class="table-wrapper">
                <table>
                    <tr><th>Content Type</th><th>Uncompressed</th><th>Target</th><th>Reduction</th></tr>
                    <tr><td><strong>1 min video</strong></td><td>~180 GB</td><td>~500 MB</td><td>360Ã—</td></tr>
                    <tr><td><strong>Single frame</strong></td><td>~100 MB</td><td>~5 MB</td><td>20Ã—</td></tr>
                    <tr><td><strong>Initial load</strong></td><td>~100 MB</td><td>~2 MB</td><td>50Ã—</td></tr>
                </table>
            </div>
        </section>

        <section class="section">
            <div class="section-num">02</div>
            <h2>Compression Strategy #1: Quantization</h2>
            <p>Reduce precision of stored values. Gaussians don't need float32 for everything.</p>
            <div class="property-grid">
                <div class="property-card"><div class="property-name">Position</div><div class="property-desc">float32 â†’ float16 (50% reduction)</div></div>
                <div class="property-card"><div class="property-name">Rotation</div><div class="property-desc">Quaternion â†’ 8-bit per component</div></div>
                <div class="property-card"><div class="property-name">Scale</div><div class="property-desc">Log scale, 16-bit</div></div>
                <div class="property-card"><div class="property-name">SH Coefficients</div><div class="property-desc">Band 0 only for distant, all for close</div></div>
            </div>
            <div class="code-block"><code><span class="comment">// Typical per-gaussian storage</span>
<span class="keyword">struct</span> GaussianFull {     <span class="comment">// 236 bytes</span>
    float3 position;       <span class="comment">// 12 bytes</span>
    float4 rotation;       <span class="comment">// 16 bytes</span>
    float3 scale;          <span class="comment">// 12 bytes</span>
    float opacity;         <span class="comment">// 4 bytes</span>
    float sh[48];          <span class="comment">// 192 bytes (16 coeffs Ã— 3 channels)</span>
}

<span class="keyword">struct</span> GaussianCompact {  <span class="comment">// 32 bytes (7.4Ã— smaller!)</span>
    half3 position;        <span class="comment">// 6 bytes</span>
    uint8_t rotation[4];   <span class="comment">// 4 bytes</span>
    half3 scale;           <span class="comment">// 6 bytes</span>
    uint8_t opacity;       <span class="comment">// 1 byte</span>
    half sh[7];            <span class="comment">// 14 bytes (band 0-1 only)</span>
}</code></div>
        </section>

        <section class="section">
            <div class="section-num">03</div>
            <h2>Compression Strategy #2: Spatial Clustering</h2>
            <p>Gaussians near each other often have similar properties. Store cluster centroids + deltas.</p>
            <div class="diagram">
                <div class="diagram-row">
                    <div class="diagram-box">1M Gaussians</div>
                    <span class="diagram-arrow">â†’</span>
                    <div class="diagram-box">K-means (1000 clusters)</div>
                    <span class="diagram-arrow">â†’</span>
                    <div class="diagram-box">Centroids + Residuals</div>
                </div>
            </div>
            <div class="code-block"><code><span class="comment">// Instead of storing absolute positions...</span>
gaussians = [
    {pos: [1.234, 5.678, 9.012]},  <span class="comment">// full precision</span>
    {pos: [1.235, 5.679, 9.011]},  <span class="comment">// very similar!</span>
    ...
]

<span class="comment">// Store cluster center + small deltas</span>
cluster_center = [1.234, 5.678, 9.012]
deltas = [
    [0.000, 0.000, 0.000],  <span class="comment">// can be 8-bit!</span>
    [0.001, 0.001, -0.001],
    ...
]</code></div>
        </section>

        <section class="section">
            <div class="section-num">04</div>
            <h2>Compression Strategy #3: Temporal Compression</h2>
            <p>This is the <strong>big opportunity</strong> for 4D content. Adjacent frames are very similar.</p>
            <h3>Keyframe + Delta Approach</h3>
            <div class="diagram">
                <p style="color: var(--text-muted); margin-bottom: 16px;">Like video codecs (I-frames and P-frames)</p>
                <div class="diagram-row">
                    <div class="diagram-box" style="background: rgba(230, 57, 70, 0.4);">Keyframe 0<br><small>Full splat</small></div>
                    <div class="diagram-box">Î”1</div>
                    <div class="diagram-box">Î”2</div>
                    <div class="diagram-box">...</div>
                    <div class="diagram-box">Î”29</div>
                    <div class="diagram-box" style="background: rgba(230, 57, 70, 0.4);">Keyframe 30<br><small>Full splat</small></div>
                </div>
            </div>
            <div class="code-block"><code><span class="comment">// Keyframe: full gaussian data</span>
keyframe_0 = {
    gaussians: [...],      <span class="comment">// 5 MB compressed</span>
    timestamp: 0
}

<span class="comment">// Delta frames: only what changed</span>
delta_1 = {
    position_deltas: [...],    <span class="comment">// ~100 KB</span>
    rotation_deltas: [...],    <span class="comment">// ~50 KB</span>
    new_gaussians: [...],      <span class="comment">// ~20 KB (appearing)</span>
    removed_indices: [...],    <span class="comment">// ~5 KB (disappearing)</span>
    timestamp: 1
}

<span class="comment">// Result: 5MB + (29 Ã— 0.2MB) = ~11MB per second vs 150MB</span></code></div>
            <div class="info-box"><p><strong>Key insight:</strong> Most gaussians don't move much frame-to-frame. Track their IDs and only send changes.</p></div>
        </section>

        <section class="section">
            <div class="section-num">05</div>
            <h2>Progressive / LOD Loading</h2>
            <p>Don't load everything at once. Stream quality based on what the user is looking at.</p>
            <h3>Level of Detail (LOD) Strategy</h3>
            <div class="property-grid">
                <div class="property-card"><div class="property-name">LOD 0 (Preview)</div><div class="property-desc">~50K gaussians, loads in <1s</div></div>
                <div class="property-card"><div class="property-name">LOD 1 (Good)</div><div class="property-desc">~200K gaussians, loads in ~3s</div></div>
                <div class="property-card"><div class="property-name">LOD 2 (Full)</div><div class="property-desc">~1M gaussians, streams over time</div></div>
            </div>
            <div class="code-block"><code><span class="keyword">class</span> <span class="function">ProgressiveLoader</span> {
    <span class="keyword">async</span> <span class="function">load</span>(splatUrl) {
        <span class="comment">// 1. Load preview immediately</span>
        <span class="keyword">const</span> lod0 = <span class="keyword">await</span> <span class="function">fetch</span>(`${splatUrl}/lod0.splat`);
        <span class="keyword">this</span>.viewer.<span class="function">setSplat</span>(lod0);  <span class="comment">// User sees something!</span>
        
        <span class="comment">// 2. Load medium quality in background</span>
        <span class="keyword">const</span> lod1 = <span class="keyword">await</span> <span class="function">fetch</span>(`${splatUrl}/lod1.splat`);
        <span class="keyword">this</span>.viewer.<span class="function">setSplat</span>(lod1);  <span class="comment">// Quality improves</span>
        
        <span class="comment">// 3. Stream full quality based on view</span>
        <span class="keyword">this</span>.<span class="function">streamHighDetail</span>(splatUrl);
    }
    
    <span class="function">streamHighDetail</span>(splatUrl) {
        <span class="comment">// Only load chunks user is looking at</span>
        <span class="keyword">const</span> viewFrustum = <span class="keyword">this</span>.viewer.<span class="function">getFrustum</span>();
        <span class="keyword">const</span> neededChunks = <span class="keyword">this</span>.<span class="function">getChunksInFrustum</span>(viewFrustum);
        <span class="comment">// Prioritize by distance to camera...</span>
    }
}</code></div>
        </section>

        <section class="section">
            <div class="section-num">06</div>
            <h2>CDN Architecture</h2>
            <p>How to actually deliver this to users worldwide.</p>
            <div class="diagram">
                <div class="diagram-row">
                    <div class="diagram-box">Origin<br><small>Bunny.net Storage</small></div>
                    <span class="diagram-arrow">â†’</span>
                    <div class="diagram-box">Edge CDN<br><small>Global POPs</small></div>
                    <span class="diagram-arrow">â†’</span>
                    <div class="diagram-box">User Browser<br><small>gsplat.js</small></div>
                </div>
            </div>
            <h3>File Structure on CDN</h3>
            <div class="code-block"><code>/content/
â”œâ”€â”€ scene_001/
â”‚   â”œâ”€â”€ manifest.json          <span class="comment"># Scene metadata</span>
â”‚   â”œâ”€â”€ lod0.splat             <span class="comment"># Preview (500KB)</span>
â”‚   â”œâ”€â”€ lod1.splat             <span class="comment"># Medium (2MB)</span>
â”‚   â”œâ”€â”€ keyframes/
â”‚   â”‚   â”œâ”€â”€ kf_000.splat       <span class="comment"># Full keyframes</span>
â”‚   â”‚   â”œâ”€â”€ kf_030.splat
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ deltas/
â”‚   â”‚   â”œâ”€â”€ d_001.bin          <span class="comment"># Frame deltas</span>
â”‚   â”‚   â”œâ”€â”€ d_002.bin
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ audio.aac              <span class="comment"># Synced audio</span></code></div>
            <h3>Manifest Schema</h3>
            <div class="code-block"><code>{
    <span class="string">"scene_id"</span>: <span class="string">"scene_001"</span>,
    <span class="string">"duration"</span>: <span class="number">180.5</span>,
    <span class="string">"fps"</span>: <span class="number">30</span>,
    <span class="string">"keyframe_interval"</span>: <span class="number">30</span>,
    <span class="string">"lod_levels"</span>: [
        { <span class="string">"level"</span>: <span class="number">0</span>, <span class="string">"gaussians"</span>: <span class="number">50000</span>, <span class="string">"file"</span>: <span class="string">"lod0.splat"</span> },
        { <span class="string">"level"</span>: <span class="number">1</span>, <span class="string">"gaussians"</span>: <span class="number">200000</span>, <span class="string">"file"</span>: <span class="string">"lod1.splat"</span> }
    ],
    <span class="string">"keyframes"</span>: [
        { <span class="string">"frame"</span>: <span class="number">0</span>, <span class="string">"file"</span>: <span class="string">"keyframes/kf_000.splat"</span>, <span class="string">"size"</span>: <span class="number">5242880</span> },
        { <span class="string">"frame"</span>: <span class="number">30</span>, <span class="string">"file"</span>: <span class="string">"keyframes/kf_030.splat"</span>, <span class="string">"size"</span>: <span class="number">5300000</span> }
    ],
    <span class="string">"audio"</span>: { <span class="string">"file"</span>: <span class="string">"audio.aac"</span>, <span class="string">"codec"</span>: <span class="string">"aac"</span> }
}</code></div>
        </section>

        <section class="section">
            <div class="section-num">07</div>
            <h2>Bandwidth Requirements</h2>
            <p>What connection speeds do users need?</p>
            <div class="table-wrapper">
                <table>
                    <tr><th>Quality</th><th>Bandwidth</th><th>Works On</th></tr>
                    <tr><td><strong>Preview (LOD0)</strong></td><td>~2 Mbps</td><td>3G, rural</td></tr>
                    <tr><td><strong>Standard (LOD1)</strong></td><td>~10 Mbps</td><td>4G, home WiFi</td></tr>
                    <tr><td><strong>Full Quality</strong></td><td>~25 Mbps</td><td>5G, fiber</td></tr>
                    <tr><td><strong>4K equivalent</strong></td><td>~50 Mbps</td><td>High-end connections</td></tr>
                </table>
            </div>
            <div class="info-box"><p><strong>Comparison:</strong> Netflix 4K requires ~25 Mbps. Our target should be similar or better for mainstream adoption.</p></div>
        </section>

        <section class="section">
            <div class="section-num">08</div>
            <h2>Open Problems / Opportunities</h2>
            <p>Areas where innovation could give SIREN a competitive edge:</p>
            <ul>
                <li><strong>Neural compression</strong> â€” Train a network to compress/decompress splats (like learned video codecs)</li>
                <li><strong>View-dependent streaming</strong> â€” Only send gaussians visible from current viewpoint</li>
                <li><strong>Predictive prefetching</strong> â€” Anticipate where user will look, preload those regions</li>
                <li><strong>Hybrid rendering</strong> â€” Low-res splat + neural super-resolution</li>
                <li><strong>P2P distribution</strong> â€” WebRTC mesh for reducing CDN costs</li>
            </ul>
        </section>

        <nav class="nav-footer">
            <a href="../path-b-capture/" class="nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg><div><div class="nav-btn-label">Previous</div><div class="nav-btn-title">B: Capture Pipeline</div></div></a>
            <a href="../path-d-infrastructure/" class="nav-btn next"><div><div class="nav-btn-label">Next</div><div class="nav-btn-title">D: Training Infrastructure</div></div><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></a>
        </nav>
    </div>
    <script>gsap.from('.page-header', { opacity: 0, y: 30, duration: 0.8 }); gsap.from('.section', { opacity: 0, y: 40, duration: 0.8, stagger: 0.15, delay: 0.2 });</script>
</body>
</html>
